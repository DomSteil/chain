box: chaindev/ci:20161028
# To update the docker image for this "box",
# see $CHAIN/docker/ci.

build:
  steps:
    - inz/npm-install@1.1.5:
      cwd: dashboard/
    - script:
        name: unit tests and formatting
        code: |
          cp -a $WERCKER_SOURCE_DIR $CHAIN
          /usr/bin/unit-tests
          /usr/bin/gofmt
          /usr/bin/javafmt
          /usr/bin/dashboard

integration-tests:
  steps:
    - script:
        name: integration tests
        code: |
          CACHE_DIR="$WERCKER_CACHE_DIR/maven" /usr/bin/integration-tests
